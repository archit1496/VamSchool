<section class="container-fluid"> 
  <div class="row">
    <div class='col-lg-9 col-sm-12'>
      <div class="mt-1 stu-standardDiv" id="mainDiv"> 
        <div class="innerDiv">
          <!-- <nav class="navbar navbar-expand-lg assignment-nav">
            <div class="navbar-collapse justify-content-left">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link mr-3" (click)="getActivityData('week=this', $event)" routerLinkActive="active">
                    <b>This week</b>
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link mr-3" (click)="getActivityData('week=last', $event)" routerLinkActive="active">
                    <b>Last Week</b>
                  </a>
                </li>
              </ul>
            </div>
          </nav> -->
          <div class="col-lg-12">
            <h5 class="mt-4 mb-4"><b>{{updateHeaderText}}</b></h5>
          </div> 
          <!-- <div *ngIf="isLoading" class="loading text-center">
            <p>Loading, Please wait...</p>
            <div class="progress">
              <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>  -->

          <div class="grid" *ngIf="firstClass">
            <div class='assignment-file-cnt' *ngFor="let data of studentAssignmentDataSubjectWise"
              (click)="fetchAssignmentData(data?.id);selectedStudentAssignmentDataSubjectWise= data">
              <div class="assignment-file"></div>
              <div class="assignment-description">
                <p class="cursor-pointer class-name"> {{ data?.class_of.class_name }}{{ data?.class_of.section }}</p>
              </div>
            </div>
          </div>

          
          <div *ngIf="secondClass">
            <div class="cursor-pointer mt-2 mb-2" id="secondClass" (click)="openForm()">
              <div class='add-file'>
                <span>Add Topic <i class="fa fa-plus" aria-hidden="true"></i></span>
              </div>
            </div>
            <div  class="grid">
              <div class="assignment-file-cnt mt-2" *ngFor="let data of assignmentData" (click)="onAssignmentClick(data?.id);this.AssignmentClick = data;">
                <div class='assignment-file'></div>
                <div class="assignment-description">
                  <p class="cursor-pointer class-name">{{data?.name}}</p>
                </div>
              </div>
            </div> 
          </div>

          <div *ngIf="thirdClass">
            <div class="cursor-pointer mt-2 mb-2" id="thirdClass" (click)="openForm2()">
              <div class='add-file'>
                <span>Add Assignment <i class="fa fa-plus" aria-hidden="true"></i></span>
              </div>
            </div>
            <div class="no-data row" *ngIf="thirdPage?.length == 0">
              <p><strong>There hasnâ€™t been any submissions yet.</strong></p>
              <div class="center-gif col-12 col-sm-12 col-lg-4">
                <img src="../../assets/images/empty.gif">
              </div>
            </div>
            <div class="grid">
              <div class="assignment-file-cnt mt-2" *ngFor="let data of thirdPage" (click)="onAssignmentClick2(data?.id);AssignmentClick2 = data">
                <div class='assignment-file-doc'></div>
                <div class="assignment-description">
                  <p class="cursor-pointer class-name">{{data?.topic}}</p>
                </div>
              </div>
            </div>
          </div>
            
          <app-add-new-assignment [status]="status" (classSelected)="postAssignmentData($event)" *ngIf="openAddNewAssignmentPage"></app-add-new-assignment>
          <div *ngIf="showHideList">
            <div *ngIf="studentAssignmentDataSubjectWise?.length == 0" style="text-align: center">
              <b>No Data To Display</b>
            </div>
            <div class="showlist" *ngIf="showHideFinalActivity">
              <div class="header row" *ngFor="let studentActivity of particularAssign; let j = index" (click)="showComments(studentActivity); specificStudent = studentActivity">
                <!-- <div [ngClass]="(studentActivity.within_deadline === true)?'due-date':'my-class2'">Within Deadline</div> -->
                <span *ngIf='studentActivity.within_deadline; else elseBlock' class="due-date">Within Deadline</span>
                <ng-template #elseBlock><span class="due-date-crossed">Deadline Crossed</span></ng-template>
                <div class="col-lg-12">
                  <div class='student-name col-lg-12 col-sm-12 col-12 text-overflow-ellipse'>
                    <p>{{studentActivity.student.first_name + ' ' +studentActivity.student.last_name}}</p>
                  </div> 

                </div>
   
              </div>
            </div>
            <div *ngIf="showCommentSection" class="col-lg-12">
              <div class="col-lg-6 col-sm-12 col-12">
                <p>Marks: <input class="marks-input"  min="0" oninput="this.value = Math.abs(this.value)" type="number" [(ngModel)]="studentActivity.mark" 
                  ><span> / 90</span></p> 
              </div>
              <div class="subheader col-lg-6 col-sm-6 col-6">
                <p><strong>Submitted on:</strong> {{getSubmissionDate(studentActivity.created_on)}} </p>
              </div>
              <div class="assignment-description-btn-cnt col-lg-6 col-sm-6 col-6">
                <button class="submit-marks solid-btn-green" (click)="update(studentActivity)">Submit Marks</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="activity-column col-lg-3 col-sm-12" *ngIf="showCommentSection">
      <div class="activity-card">
        <div class="activity-heading">
          <h2>{{specificStudent.student.first_name + ' ' +specificStudent.student.last_name}} <span *ngIf="specificStudent.student.first_name!= ''">'s Work</span>  </h2>
        </div> 
        <div class="width-full text-center">
          <button style="width: 100%;" type="submit" class="solid-btn-download" (click)="download(specificStudent.question.doc_question)">
            <i class="fa fa-download" aria-hidden="true" ></i> Download Assignment
          </button>
        </div> 
        <!-- <div class="width-full upload-cnt">
          <label style="text-align: center;" for="upload-notes">Upload Correction</label>
          <input name="upload-notes" type="file" id="upload-notes">
        </div> -->
        <hr>
        <div class="activity-heading">
          <h2>Private Comments</h2>
          <form ngNativeValidate (ngSubmit)="addComment()">
            <div class="comment-div">
              <input class="type-cmnt" type="text" name="" id="" [(ngModel)]="commentText" required>
              <button type='submit'><i class="fa fa-arrow-circle-right" aria-hidden="true"></i></button>
            </div>
          </form>
          <ul class="comments-list">
            <li [ngClass]="(i.author == teacherId)?'me':'other'" *ngFor="let i of commentData">
              <span class="cmnt-text">{{i.content}}</span><span class="cmnt-time">{{formatAMPM(i.timestamp)}}</span>
            </li>
          </ul> 
        </div>
      </div>
    </div>
    <div class="activity-column col-lg-3 col-sm-12" *ngIf="showActivity">
      <div class="activity-card">
        <div class="activity-heading">
          <h2>Activity</h2>
        </div>
        <div class='activity-card-element'>
          <div class="showlist">
            <div class="alignlist" *ngFor="let studentActivity of activityData">
              <div class="width-full">
                <p>{{studentActivity.student.first_name + ' ' +studentActivity.student.first_name}} just submitted hisassignment</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>